---
title: "移除空索引 stripEmpty"
description: "stripEmpty 使用"
---

import CodeRunner from "../../../../components/CodeRunner.astro"
import Badge from "../../../../components/Badge.astro"

> <Badge v='2.6.3' />&nbsp;存在循环依赖问题，优化代码，通过严格边缘性测试

> 已经发现2.6.3存在bug，我今天不想写代码了，累了，一星期之内搞定2025-11-12 16:53 <br/>
> 想了一下逻辑，都为空最该返回最顶层的数据类型数据([ ] or \{ \})

<br/>
<p>打乱数组</p>
<br/>
 * 空数组都会被过滤掉`arr:[]`
 * 去空判断逻辑为统一的内部函数 [defaultCheckEmpty](https://github.com/YOuRHhH/zztool/blob/main/lib/utils/public.ts)
<head>
  <script src="https://cdn.jsdelivr.net/npm/@zzcpt/zztool" defer></script>
</head>

<CodeRunner code={`
const obj = { a: 1, d:'',z:{a:1,b:'',xx:{},zz:[]}};
console.log(zztool.stripEmpty(obj))
const obj1 = [{a:1},[]];
console.log(zztool.stripEmpty(obj1))
`} />

### props
| 属性名 | 说明 | 类型 | 必填 | 默认值 |
| --- | --- | --- | --- | --- |
| *data* | *数据* | *\** | *✅* | *-* |
| *option* | *配置项* | *Object* | *❌* | *-* |
| *option.checkEmptyFn* | *判空逻辑* | *Function* | *❌* | *defaultCheckEmpty* |
{/* | *format* | *格式* | *String* | *❌* | *hh:mm* | */}



### 返回值
返回值

### 更新
* <Badge v='2.6.3' />&nbsp;存在循环依赖问题，优化代码，通过严格边缘性测试
* <Badge v='2.5.4' />&nbsp;
  ```javascript
    /*
    * 输出与预期不一样
    * 预期 {}
    * 实际 {b:{}}
    */
    const obj = {a:[],b:{c:[]}}
    stripEmpty(obj)
    ```